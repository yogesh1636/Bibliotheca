<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Shop | Bibliotheca.</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-white text-gray-800 font-sans">

<header class="bg-white shadow-md sticky top-0 z-50">
  <div class="max-w-7xl mx-auto px-4 flex justify-between items-center h-16">
    <h1 class="text-2xl font-bold text-indigo-600">Bibliotheca.</h1>

    <nav class="hidden md:flex gap-6 text-gray-700 font-medium items-center">
      <a href="index.html" class="hover:text-indigo-600">Home</a>
      <a href="shop.html" class="hover:text-indigo-600">Shop</a>
      <a href="cart.html" class="relative hover:text-indigo-600">
        Cart
        <span id="cartCount" class="absolute -top-2 -right-3 bg-indigo-600 text-white text-xs px-2 rounded-full">0</span>
      </a>
    </nav>

    <div class="md:hidden relative">
      <button onclick="toggleMenu()" class="text-xl">☰</button>
      <div id="mobileMenu" class="hidden absolute right-0 mt-2 w-40 bg-white border rounded shadow">
        <a href="index.html" class="block px-4 py-2 hover:bg-indigo-50">Home</a>
        <a href="shop.html" class="block px-4 py-2 hover:bg-indigo-50">Shop</a>
        <a href="cart.html" class="block px-4 py-2 hover:bg-indigo-50">Cart</a>
      </div>
    </div>
  </div>
</header>

<section class="max-w-6xl mx-auto px-4 pt-8">
  <div class="flex flex-wrap gap-4 justify-between items-center mb-8">
    <input id="searchInput" type="text" placeholder="Search books..."
      class="border px-4 py-2 rounded w-full md:w-1/2">

    <select id="sortSelect" class="border px-4 py-2 rounded">
      <option value="default">Sort by</option>
      <option value="low">Price: Low to High</option>
      <option value="high">Price: High to Low</option>
    </select>
  </div>

  <div class="flex flex-wrap gap-4 justify-center mb-8">
    <button class="category-btn bg-indigo-200 font-bold px-4 py-2 rounded" data-category="all">All</button>
    <button class="category-btn bg-indigo-100 px-4 py-2 rounded" data-category="fiction">Fiction</button>
    <button class="category-btn bg-indigo-100 px-4 py-2 rounded" data-category="fantasy">Fantasy</button>
    <button class="category-btn bg-indigo-100 px-4 py-2 rounded" data-category="romance">Romance</button>
    <button class="category-btn bg-indigo-100 px-4 py-2 rounded" data-category="manga">Manga / Manhwa</button>
    <button class="category-btn bg-indigo-100 px-4 py-2 rounded" data-category="selfhelp">Self Help</button>
  </div>
</section>

<section id="productGrid"
  class="max-w-6xl mx-auto px-4 pb-16 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8">
</section>

<div id="toast"
  class="fixed bottom-6 right-6 bg-indigo-600 text-white px-4 py-2 rounded shadow hidden">
  Added to cart
</div>

<footer class="bg-gray-100 text-center py-6 text-gray-600 mt-12">
  © 2025 Bibliotheca.
</footer>

<script>
function toggleMenu() {
  document.getElementById('mobileMenu').classList.toggle('hidden');
}

const allBooks = [
  {title:"Bakemonogatari",author:"Nisio Isin",price:499,category:"manga",image:"covers/bakemonogatari.jpeg",tag:"NEW"},
  {title:"Classroom of the Elite",author:"Syougo Kinugasa",price:399,category:"fiction",image:"covers/classroomofelites.png"},
  {title:"It Starts With Us",author:"Colleen Hoover",price:299,category:"romance",image:"covers/itstartswithus.jpeg"},
  {title:"No Longer Human",author:"Osamu Dazai",price:349,category:"fiction",image:"covers/nolongerhuman.jpeg"},
  {title:"Out",author:"Natsuo Kirino",price:399,category:"fiction",image:"covers/out.jpeg"},
  {title:"The Wind-Up Bird Chronicle",author:"Haruki Murakami",price:599,category:"fiction",image:"covers/thewindupbird.png"},
  {title:"Sword Art Online: Alicization",author:"Reki Kawahara",price:599,category:"fantasy",image:"covers/SAOAlici.jpeg"},
  {title:"Harry Potter and the Philosopher's Stone",author:"J.K. Rowling",price:749,category:"fantasy",image:"covers/harryphilosophergryff.jpg",tag:"POPULAR"},
  {title:"Harry Potter and the Chamber of Secrets",author:"J.K. Rowling",price:699,category:"fantasy",image:"covers/harrychamberslyther.jpg"},
  {title:"Harry Potter and the Prisoner of Azkaban",author:"J.K. Rowling",price:749,category:"fantasy",image:"covers/harryprisonerhufflepu.jpg"},
  {title:"Harry Potter and the Goblet of Fire",author:"J.K. Rowling",price:699,category:"fantasy",image:"covers/harrygoblethuffle.jpg"},
  {title:"Harry Potter and the Order of the Phoenix",author:"J.K. Rowling",price:789,category:"fantasy",image:"covers/harrypheonixraven.jpg"},
  {title:"Harry Potter and the Half-Blood Prince",author:"J.K. Rowling",price:599,category:"fantasy",image:"covers/harryhalfslytherin.jpg"},
  {title:"Harry Potter and the Deathly Hallows",author:"J.K. Rowling",price:789,category:"fantasy",image:"covers/harryhallowsgryffin.jpg"},
  {title:"The Climber",author:"Shinichi Sakamoto",price:649,category:"manga",image:"covers/theclimber.png"},
  {title:"Berserk",author:"Kentaro Miura",price:799,category:"manga",image:"covers/berserk.jpg"},
  {title:"Atomic Habits",author:"James Clear",price:499,category:"selfhelp",image:"covers/atomichabits.jpg",tag:"POPULAR"},
  {title:"Ikigai",author:"Hector Garcia",price:349,category:"selfhelp",image:"covers/ikigai.jpg"},
  {title:"The Alchemist",author:"Paulo Coelho",price:399,category:"fiction",image:"covers/thealchemist.jpg"},
  {title:"Gone Girl",author:"Gillian Flynn",price:459,category:"fiction",image:"covers/gonegirl.jpg"}
];

let currentBooks = [...allBooks];

function updateCartCount() {
  const cart = JSON.parse(localStorage.getItem("cart")) || [];
  document.getElementById("cartCount").innerText = cart.length;
}

function addToCart(book) {
  const cart = JSON.parse(localStorage.getItem("cart")) || [];
  cart.push(book);
  localStorage.setItem("cart", JSON.stringify(cart));
  updateCartCount();

  const toast = document.getElementById("toast");
  toast.classList.remove("hidden");
  setTimeout(() => toast.classList.add("hidden"), 1500);
}

function renderBooks(books) {
  const grid = document.getElementById("productGrid");
  grid.innerHTML = "";
  books.forEach(book => {
    grid.innerHTML += `
      <div class="relative border rounded shadow p-4 text-center transition transform hover:-translate-y-1 hover:shadow-lg">
        ${book.tag ? `<span class="absolute top-2 left-2 bg-indigo-600 text-white text-xs px-2 py-1 rounded">${book.tag}</span>` : ""}
        <img src="${book.image}" class="w-full h-64 object-cover mb-4 rounded">
        <h3 class="text-lg font-semibold">${book.title}</h3>
        <p class="text-sm text-gray-500">by ${book.author}</p>
        <p class="mt-2 font-bold text-indigo-700">₹${book.price}</p>
        <button onclick='addToCart(${JSON.stringify(book)})'
          class="mt-3 bg-indigo-600 px-4 py-2 rounded text-white hover:bg-indigo-700">
          Add to Cart
        </button>
      </div>
    `;
  });
}

renderBooks(allBooks);
updateCartCount();

document.getElementById("searchInput").oninput = e => {
  const q = e.target.value.toLowerCase();
  currentBooks = allBooks.filter(b =>
    b.title.toLowerCase().includes(q) || b.author.toLowerCase().includes(q)
  );
  renderBooks(currentBooks);
};

document.getElementById("sortSelect").onchange = e => {
  if (e.target.value === "low") currentBooks.sort((a,b)=>a.price-b.price);
  if (e.target.value === "high") currentBooks.sort((a,b)=>b.price-a.price);
  renderBooks(currentBooks);
};

document.querySelectorAll(".category-btn").forEach(btn => {
  btn.onclick = () => {
    document.querySelectorAll(".category-btn").forEach(b=>b.classList.remove("bg-indigo-200","font-bold"));
    btn.classList.add("bg-indigo-200","font-bold");
    const cat = btn.dataset.category;
    currentBooks = cat==="all" ? [...allBooks] : allBooks.filter(b=>b.category===cat);
    renderBooks(currentBooks);
  };
});
</script>

</body>
</html>
